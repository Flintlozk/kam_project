<div class="leads-info">
  <form [formGroup]="leadForm" *ngIf="leadForm">
    <reactor-room-heading [headingTitle]="'Edit Info' | translate" [Route]="'Leads / Form /  Edit Info'">
      <div class="heading-content action-group" [ngStyle]="{ 'grid-template-columns': 'repeat(' + gridAlign + ', 1fr)' }">
        <button class="btn-cancel" (click)="onClickCancel()">{{ 'Cancel' | translate }}</button>

        <button
          class="btn-save"
          [ngClass]="{ disabled: leadForm.status === 'DISABLED' || hasSavedForm || (leadForm.valid && leadForm.dirty) }"
          type="submit"
          [disabled]="leadForm.status === 'DISABLED' || hasSavedForm"
          (click)="onSave()"
          *ngIf="audience$ && !formSubmission$"
        >
          <svg width="23" height="16" viewBox="0 0 23 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M15.5882 2.67522L13.3249 0.411875C13.0593 0.14625 12.7061 0 12.3305 0C12.0512 0 4.55525 0 4.21881 0H1.40631C0.630905 0 6.10352e-05 0.630844 6.10352e-05 1.40625V14.5938C6.10352e-05 15.3692 0.630905 16 1.40631 16C2.09906 16 14.0495 16 14.5938 16C15.3692 16 16.0001 15.3692 16.0001 14.5938V3.66956C16.0001 3.29397 15.8538 2.94081 15.5882 2.67522ZM4.68756 0.9375H9.43756V3.65625C9.43756 3.91513 9.64744 4.125 9.90631 4.125C10.1652 4.125 10.3751 3.91513 10.3751 3.65625V0.9375H11.3126V4.59375C11.3126 4.85222 11.1023 5.0625 10.8438 5.0625H5.15631C4.89784 5.0625 4.68756 4.85222 4.68756 4.59375V0.9375ZM12.2501 15.0625H3.75006V11H12.2501V15.0625ZM12.2501 10.0625H3.75006V8.5C3.75006 8.24153 3.96034 8.03125 4.21881 8.03125H11.7813C12.0398 8.03125 12.2501 8.24153 12.2501 8.5V10.0625ZM15.0626 14.5938C15.0626 14.8522 14.8523 15.0625 14.5938 15.0625H13.1876V8.5C13.1876 7.72459 12.5567 7.09375 11.7813 7.09375H4.21881C3.4434 7.09375 2.81256 7.72459 2.81256 8.5V15.0625H1.40631C1.14784 15.0625 0.937561 14.8522 0.937561 14.5938V1.40625C0.937561 1.14778 1.14784 0.9375 1.40631 0.9375H3.75006V4.59375C3.75006 5.36916 4.3809 6 5.15631 6H10.8438C11.6192 6 12.2501 5.36916 12.2501 4.59375V0.9375H12.3305C12.4557 0.9375 12.5734 0.98625 12.6619 1.07478L14.9252 3.33813C15.0138 3.42666 15.0626 3.54438 15.0626 3.66956V14.5938Z"
            />
          </svg>
          {{ 'Save' | translate }}
        </button>

        <button class="btn-save" [ngClass]="{ disabled: messageForm.pristine }" type="submit" (click)="saveMessage()" *ngIf="view(enumLeadViewMode.CREATE)">
          <svg width="23" height="16" viewBox="0 0 23 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M15.5882 2.67522L13.3249 0.411875C13.0593 0.14625 12.7061 0 12.3305 0C12.0512 0 4.55525 0 4.21881 0H1.40631C0.630905 0 6.10352e-05 0.630844 6.10352e-05 1.40625V14.5938C6.10352e-05 15.3692 0.630905 16 1.40631 16C2.09906 16 14.0495 16 14.5938 16C15.3692 16 16.0001 15.3692 16.0001 14.5938V3.66956C16.0001 3.29397 15.8538 2.94081 15.5882 2.67522ZM4.68756 0.9375H9.43756V3.65625C9.43756 3.91513 9.64744 4.125 9.90631 4.125C10.1652 4.125 10.3751 3.91513 10.3751 3.65625V0.9375H11.3126V4.59375C11.3126 4.85222 11.1023 5.0625 10.8438 5.0625H5.15631C4.89784 5.0625 4.68756 4.85222 4.68756 4.59375V0.9375ZM12.2501 15.0625H3.75006V11H12.2501V15.0625ZM12.2501 10.0625H3.75006V8.5C3.75006 8.24153 3.96034 8.03125 4.21881 8.03125H11.7813C12.0398 8.03125 12.2501 8.24153 12.2501 8.5V10.0625ZM15.0626 14.5938C15.0626 14.8522 14.8523 15.0625 14.5938 15.0625H13.1876V8.5C13.1876 7.72459 12.5567 7.09375 11.7813 7.09375H4.21881C3.4434 7.09375 2.81256 7.72459 2.81256 8.5V15.0625H1.40631C1.14784 15.0625 0.937561 14.8522 0.937561 14.5938V1.40625C0.937561 1.14778 1.14784 0.9375 1.40631 0.9375H3.75006V4.59375C3.75006 5.36916 4.3809 6 5.15631 6H10.8438C11.6192 6 12.2501 5.36916 12.2501 4.59375V0.9375H12.3305C12.4557 0.9375 12.5734 0.98625 12.6619 1.07478L14.9252 3.33813C15.0138 3.42666 15.0626 3.54438 15.0626 3.66956V14.5938Z"
            />
          </svg>
          {{ 'Save' | translate }}
        </button>
      </div>
    </reactor-room-heading>
    <div class="container" [ngClass]="{ grid: !audience$ }">
      <ng-container class="chat-content-layout">
        <div class="form" [ngClass]="{ collapsecontent: chatBoxStatus }">
          <div class="flex justify-between head">
            <span [innerText]="selectedForm?.name | translate" *ngIf="selectedForm"></span>
          </div>
          <div class="names" *ngIf="formFields">
            <div class="item" *ngFor="let form of formFields">
              <div class="label" [innerText]="(form?.options?.label.slice(0, -1) | translate) + '*'"></div>
              <input
                [type]="form.type"
                [formControlName]="form?.options?.controlName"
                [required]="form?.options?.required"
                [disabled]="formSubmission$"
                [readonly]="formSubmission$"
              />
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container class="chat-content-layout">
        <div class="form">
          <div class="flex justify-between head">
            <span [innerText]="'Message box' | translate"></span>
          </div>

          <div class="create-message-group">
            <div class="message-group">
              <div class="preview">
                <div class="chat">
                  <div class="preview-head">
                    {{ messageForm.controls.greeting_message.value ? messageForm.controls.greeting_message.value : 'กรุณากรอกข้อมูลเพื่อใช้ในการติดต่อ' }}
                  </div>
                  <div class="preview-button">
                    {{ messageForm.controls.button_input.value ? messageForm.controls.button_input.value : 'ดำเนินการ' }}
                  </div>
                </div>
                <div class="head-bob">
                  <img src="{{ newPicture }}" style="display: width 34px; height: 34px" />
                </div>

                <div class="chat">
                  <div class="preview-head">
                    {{ messageForm.controls.thank_you_message.value ? messageForm.controls.thank_you_message.value : 'ขอบคุณ เราได้รับข้อมูลสำหรับติดต่อกลับแล้ว' }}
                  </div>
                </div>

                <div class="head-bob">
                  <img src="{{ newPicture }}" style="display: width 34px; height: 34px" />
                </div>
              </div>
            </div>
          </div>

          <div class="create-message-group">
            <div class="message-group">
              <form class="message-form" [formGroup]="messageForm">
                <div class="item">
                  <div class="label">{{ 'Greeting Message' | translate }}<span style="color: red">*</span></div>
                  <input formControlName="greeting_message" [placeholder]="'Hello please fill up contact info' | translate" />
                </div>
                <div class="item">
                  <div class="label">{{ 'Button Message' | translate }}<span style="color: red">*</span></div>
                  <input formControlName="button_input" [placeholder]="'Enter Contact Info' | translate" />
                </div>

                <div class="item">
                  <div class="label">{{ 'Thank You Message' | translate }}<span style="color: red">*</span></div>
                  <input formControlName="thank_you_message" [placeholder]="'Thank you We have received your contact' | translate" />
                </div>
              </form>
            </div>
          </div>
        </div>
      </ng-container>
      <reactor-room-loader [block]="true" [text]="loadingText" *ngIf="isLoad"></reactor-room-loader>
    </div>
  </form>
</div>
